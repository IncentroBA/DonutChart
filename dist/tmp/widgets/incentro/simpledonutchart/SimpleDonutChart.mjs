import { useState, useRef, useEffect, createElement } from 'react';

function styleInject(css, ref) {
  if (ref === void 0) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') {
    return;
  }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css_248z = "\n.simple-donut-chart-widget {\n    align-items: center;\n    display: flex;\n    margin-bottom: 24px;\n    position: relative;\n}\n\n.simple-donut-chart-widget .donut {\n    align-items: center;\n    display: flex;\n    flex: 1;\n    height: 100%;\n    justify-content: center;\n    margin-right: 16px;\n    width: 100%;\n}\n\n.simple-donut-chart-widget .donut-slice {\n    transition: stroke-width 0.2s ease;\n    cursor: pointer;\n}\n\n.simple-donut-chart-widget .simple-donut-chart-info {\n    position: relative;\n}\n\n.simple-donut-chart-widget .linechart-legend {\n    margin-bottom: 30px;\n    padding: 0;\n    display: flex;\n    flex-direction: column;\n    width: max-content;\n}\n\n.simple-donut-chart-widget .linechart-legend p:first-of-type {\n    flex: 1;\n    margin-right: 16px;\n}\n\n.simple-donut-chart-widget .linechart-legend li {\n    align-items: center;\n    display: flex;\n    list-style: none;\n}\n\n.simple-donut-chart-widget .linechart-legend li:hover {\n    cursor: pointer;\n}\n\n.simple-donut-chart-widget .linechart-legend p {\n    margin: 0;\n}\n\n.simple-donut-chart-widget .linechart-legend span {\n    border-radius: 50px;\n    display: block;\n    height: 16px;\n    margin-right: 8px;\n    width: 16px;\n}\n\n.simple-donut-chart-widget .linechart-chart {\n    align-self: center;\n    display: flex;\n    grid-template-columns: repeat(100, 1fr);\n    grid-auto-flow: column;\n    margin: 0;\n    padding: 0;\n}\n\n.simple-donut-chart-widget .linechart-chart li {\n    list-style: none;\n    min-height: 20px;\n    position: relative;\n}\n\n.simple-donut-chart-widget .linechart-chart.linechart-chart--rounded li:first-of-type {\n    border-top-left-radius: 50px;\n    border-bottom-left-radius: 50px;\n}\n\n.simple-donut-chart-widget .linechart-chart.linechart-chart--rounded li:last-of-type {\n    border-top-right-radius: 50px;\n    border-bottom-right-radius: 50px;\n}\n\n.simple-donut-chart-widget .linechart-chart li:hover {\n    cursor: pointer;\n}\n\n.simple-donut-chart-widget .linechart-legend li .linechart-tooltip {\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.3);\n    border-radius: 4px;\n    display: flex;\n    left: var(--x);\n    opacity: 0;\n    padding: 4px 8px;\n    position: fixed;\n    pointer-events: none;\n    transition: opacity 0.2s ease, transform 0.2s ease;\n    top: var(--y);\n    will-change: opacity;\n    width: max-content;\n    z-index: 1;\n}\n\n.simple-donut-chart-widget .linechart-legend li .linechart-tooltip.show-tooltip {\n    opacity: 1;\n    transform: translateY(-60%);\n}\n\n.simple-donut-chart-widget .linechart-chart li .linechart-tooltip p {\n    margin: 0;\n    padding: 4px 8px;\n}\n\n.simple-donut-chart-widget .linechart-meter {\n    border-top: solid 1px black;\n    display: flex;\n    justify-content: space-between;\n}\n\n.simple-donut-chart-widget .linechart-meter .item {\n    background-color: black;\n    height: 9px;\n    width: 1px;\n}\n\n.simple-donut-chart-widget .linechart-indicators {\n    display: flex;\n}\n\n.simple-donut-chart-widget .linechart-indicator {\n    flex: 1;\n}\n\n.simple-donut-chart-widget .linechart-indicator:nth-child(2) {\n    text-align: center;\n}\n\n.simple-donut-chart-widget .linechart-indicator:last-of-type {\n    text-align: right;\n}\n\n.simple-donut-chart-widget .linechart-tooltip {\n    position: absolute;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNpbXBsZURvbnV0Q2hhcnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtJQUNJLG1CQUFtQjtJQUNuQixhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixhQUFhO0lBQ2IsT0FBTztJQUNQLFlBQVk7SUFDWix1QkFBdUI7SUFDdkIsa0JBQWtCO0lBQ2xCLFdBQVc7QUFDZjs7QUFFQTtJQUNJLGtDQUFrQztJQUNsQyxlQUFlO0FBQ25COztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksbUJBQW1CO0lBQ25CLFVBQVU7SUFDVixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLE9BQU87SUFDUCxrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkIsYUFBYTtJQUNiLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxTQUFTO0FBQ2I7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkIsY0FBYztJQUNkLFlBQVk7SUFDWixpQkFBaUI7SUFDakIsV0FBVztBQUNmOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYix1Q0FBdUM7SUFDdkMsc0JBQXNCO0lBQ3RCLFNBQVM7SUFDVCxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLDRCQUE0QjtJQUM1QiwrQkFBK0I7QUFDbkM7O0FBRUE7SUFDSSw2QkFBNkI7SUFDN0IsZ0NBQWdDO0FBQ3BDOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLHVCQUF1QjtJQUN2QiwwQ0FBMEM7SUFDMUMsa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixjQUFjO0lBQ2QsVUFBVTtJQUNWLGdCQUFnQjtJQUNoQixlQUFlO0lBQ2Ysb0JBQW9CO0lBQ3BCLGtEQUFrRDtJQUNsRCxhQUFhO0lBQ2Isb0JBQW9CO0lBQ3BCLGtCQUFrQjtJQUNsQixVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxVQUFVO0lBQ1YsMkJBQTJCO0FBQy9COztBQUVBO0lBQ0ksU0FBUztJQUNULGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLDJCQUEyQjtJQUMzQixhQUFhO0lBQ2IsOEJBQThCO0FBQ2xDOztBQUVBO0lBQ0ksdUJBQXVCO0lBQ3ZCLFdBQVc7SUFDWCxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksT0FBTztBQUNYOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCIiwiZmlsZSI6IlNpbXBsZURvbnV0Q2hhcnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG1hcmdpbi1ib3R0b206IDI0cHg7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAuZG9udXQge1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAxO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gICAgd2lkdGg6IDEwMCU7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5kb251dC1zbGljZSB7XG4gICAgdHJhbnNpdGlvbjogc3Ryb2tlLXdpZHRoIDAuMnMgZWFzZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5zaW1wbGUtZG9udXQtY2hhcnQtaW5mbyB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAubGluZWNoYXJ0LWxlZ2VuZCB7XG4gICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICBwYWRkaW5nOiAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB3aWR0aDogbWF4LWNvbnRlbnQ7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5saW5lY2hhcnQtbGVnZW5kIHA6Zmlyc3Qtb2YtdHlwZSB7XG4gICAgZmxleDogMTtcbiAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5saW5lY2hhcnQtbGVnZW5kIGxpIHtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC1sZWdlbmQgbGk6aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC1sZWdlbmQgcCB7XG4gICAgbWFyZ2luOiAwO1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAubGluZWNoYXJ0LWxlZ2VuZCBzcGFuIHtcbiAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGhlaWdodDogMTZweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICB3aWR0aDogMTZweDtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC1jaGFydCB7XG4gICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMTAwLCAxZnIpO1xuICAgIGdyaWQtYXV0by1mbG93OiBjb2x1bW47XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5saW5lY2hhcnQtY2hhcnQgbGkge1xuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgbWluLWhlaWdodDogMjBweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5saW5lY2hhcnQtY2hhcnQubGluZWNoYXJ0LWNoYXJ0LS1yb3VuZGVkIGxpOmZpcnN0LW9mLXR5cGUge1xuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDUwcHg7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNTBweDtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC1jaGFydC5saW5lY2hhcnQtY2hhcnQtLXJvdW5kZWQgbGk6bGFzdC1vZi10eXBlIHtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNTBweDtcbiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNTBweDtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC1jaGFydCBsaTpob3ZlciB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAubGluZWNoYXJ0LWxlZ2VuZCBsaSAubGluZWNoYXJ0LXRvb2x0aXAge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGJveC1zaGFkb3c6IDAgMnB4IDJweCAwIHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBsZWZ0OiB2YXIoLS14KTtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLCB0cmFuc2Zvcm0gMC4ycyBlYXNlO1xuICAgIHRvcDogdmFyKC0teSk7XG4gICAgd2lsbC1jaGFuZ2U6IG9wYWNpdHk7XG4gICAgd2lkdGg6IG1heC1jb250ZW50O1xuICAgIHotaW5kZXg6IDE7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5saW5lY2hhcnQtbGVnZW5kIGxpIC5saW5lY2hhcnQtdG9vbHRpcC5zaG93LXRvb2x0aXAge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC02MCUpO1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAubGluZWNoYXJ0LWNoYXJ0IGxpIC5saW5lY2hhcnQtdG9vbHRpcCBwIHtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogNHB4IDhweDtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC1tZXRlciB7XG4gICAgYm9yZGVyLXRvcDogc29saWQgMXB4IGJsYWNrO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAubGluZWNoYXJ0LW1ldGVyIC5pdGVtIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgICBoZWlnaHQ6IDlweDtcbiAgICB3aWR0aDogMXB4O1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAubGluZWNoYXJ0LWluZGljYXRvcnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5zaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0IC5saW5lY2hhcnQtaW5kaWNhdG9yIHtcbiAgICBmbGV4OiAxO1xufVxuXG4uc2ltcGxlLWRvbnV0LWNoYXJ0LXdpZGdldCAubGluZWNoYXJ0LWluZGljYXRvcjpudGgtY2hpbGQoMikge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC1pbmRpY2F0b3I6bGFzdC1vZi10eXBlIHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuLnNpbXBsZS1kb251dC1jaGFydC13aWRnZXQgLmxpbmVjaGFydC10b29sdGlwIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG59XG4iXX0= */";
styleInject(css_248z);

function SimpleDonutChart({
  context,
  chartValue,
  colors,
  customSortOrder,
  chartName,
  displayTotal,
  sortAttribute,
  sortOrder,
  unit,
  unitPosition
}) {
  const [canRender, setCanRender] = useState(false);
  const containerRef = useRef([]);
  const tooltipRef = useRef([]);
  const colorArray = ["#003f5c", "#2f4b7c", "#665191", "#a05195", "#d45087", "#f95d6a", "#ff7c43", "#ffa600"];
  const [total, setTotal] = useState(0);
  const strokeWidth = 4;
  let currentIndex = 0;
  let preSegmentsTotalLength = 0;
  let sortInstrs = [];

  function setTooltipPosition(event) {
    const cursorSize = 32 / 2;
    const x = event.pageX + cursorSize;
    const y = event.pageY - cursorSize;
    tooltipRef.current[currentIndex].style.setProperty("--x", `${x}px`);
    tooltipRef.current[currentIndex].style.setProperty("--y", `${y}px`);
  }

  function showHghlightPart(currentContainer) {
    currentContainer.style.strokeWidth = strokeWidth + 2;
  }

  function hideHighlightPart(currentContainer) {
    currentContainer.style.strokeWidth = null;
  }

  function showTooltip(index, currentContainer) {
    tooltipRef.current[index].classList.add("show-tooltip");
    currentIndex = index;
    showHghlightPart(currentContainer);
    document.addEventListener("mousemove", setTooltipPosition);
  }

  function hideTooltip(index, currentContainer) {
    tooltipRef.current[index].classList.remove("show-tooltip");
    currentIndex = 0;
    hideHighlightPart(currentContainer);
    document.removeEventListener("mousemove", setTooltipPosition);
  }

  function calcTotal() {
    const totals = [];
    context.items.map((item, index) => totals.push(Number(chartValue.get(context.items[index]).displayValue)));
    setTotal(totals.reduce((a, b) => a + b, 0));
  }

  function setSortOrder() {
    if (!customSortOrder && sortAttribute === "chartName" && chartName.sortable) {
      sortInstrs = [[chartName.id, sortOrder]];
    } else if (!customSortOrder && sortAttribute === "chartValue" && chartValue.sortable) {
      sortInstrs = [[chartValue.id, sortOrder]];
    } else if (customSortOrder && customSortOrder.sortable) {
      sortInstrs = [[customSortOrder.id, sortOrder]];
    }

    context.setSortOrder(sortInstrs);
  }

  useEffect(() => {
    if (context && context.status === "available" && context.items.length > 0) {
      setSortOrder();
      calcTotal();
      setCanRender(true);
    }
  }, [context, colors]);

  if (canRender) {
    const radius = 15.91549430918952;
    const circumference = 2 * Math.PI * radius;
    const startAngle = -90;

    function segmentTotalLength(index) {
      const thisTotal = preSegmentsTotalLength * 360 / total + startAngle;
      preSegmentsTotalLength += Number(Math.round(chartValue.get(context.items[index]).displayValue));
      return thisTotal;
    }

    return createElement("div", {
      className: "simple-donut-chart-widget"
    }, createElement("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      className: "donut",
      viewBox: "0 0 40 40",
      preserveAspectRatio: "xMinYMin meet"
    }, context.items.map((item, index) => createElement("circle", {
      key: item,
      ref: element => containerRef.current[index] = element,
      name: `simpledonutchart-index-${index}`,
      onMouseEnter: () => showTooltip(index, containerRef.current[index]),
      onMouseLeave: () => hideTooltip(index, containerRef.current[index]),
      cx: "20",
      cy: "20",
      class: "donut-slice",
      r: radius,
      "stroke-width": strokeWidth,
      stroke: `var(--linechart-color-${[index]}, ${colors[index] ? colors[index].value : colorArray[index]})`,
      strokeDasharray: Math.round(circumference),
      strokeDashoffset: Math.round(circumference - circumference * chartValue.get(context.items[index]).displayValue / total),
      transform: `rotate(${segmentTotalLength(index)} 20 20)`,
      fill: "none"
    }))), createElement("div", {
      className: "simple-donut-chart-info"
    }, displayTotal && createElement("h1", {
      className: "linechart-total"
    }, unitPosition === "before" && unit && unit, total, unitPosition === "after" && unit && unit), createElement("ul", {
      className: `linechart-legend`
    }, context.items.map((item, index) => createElement("li", {
      key: item,
      name: `linechart-legend-index-${index}`,
      onMouseEnter: () => showHghlightPart(containerRef.current[index]),
      onMouseLeave: () => hideHighlightPart(containerRef.current[index])
    }, createElement("span", {
      style: {
        backgroundColor: `var(--linechart-color-${[index]}, ${colors[index] ? colors[index].value : colorArray[index]})`
      }
    }), createElement("p", null, chartName.get(context.items[index]).displayValue), createElement("p", null, unitPosition === "before" && unit && unit, chartValue.get(context.items[index]).displayValue, unitPosition === "after" && unit && unit), createElement("div", {
      className: "linechart-tooltip",
      ref: element => tooltipRef.current[index] = element
    }, createElement("p", null, chartName.get(context.items[index]).displayValue), createElement("p", null, unitPosition === "before" && unit && unit, chartValue.get(context.items[index]).displayValue, unitPosition === "after" && unit && unit)))))));
  } else {
    return createElement("div", {
      className: "linechart-widget"
    });
  }
}

export { SimpleDonutChart as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2ltcGxlRG9udXRDaGFydC5tanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1pbmplY3QvZGlzdC9zdHlsZS1pbmplY3QuZXMuanMiLCIuLi8uLi8uLi8uLi8uLi9zcmMvU2ltcGxlRG9udXRDaGFydC5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc3R5bGVJbmplY3QoY3NzLCByZWYpIHtcbiAgaWYgKCByZWYgPT09IHZvaWQgMCApIHJlZiA9IHt9O1xuICB2YXIgaW5zZXJ0QXQgPSByZWYuaW5zZXJ0QXQ7XG5cbiAgaWYgKCFjc3MgfHwgdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgeyByZXR1cm47IH1cblxuICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cbiAgaWYgKGluc2VydEF0ID09PSAndG9wJykge1xuICAgIGlmIChoZWFkLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBzdHlsZUluamVjdDtcbiIsImltcG9ydCBcIi4vdWkvU2ltcGxlRG9udXRDaGFydC5jc3NcIjtcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaW1wbGVEb251dENoYXJ0KHtcbiAgICBjb250ZXh0LFxuICAgIGNoYXJ0VmFsdWUsXG4gICAgY29sb3JzLFxuICAgIGN1c3RvbVNvcnRPcmRlcixcbiAgICBjaGFydE5hbWUsXG4gICAgZGlzcGxheVRvdGFsLFxuICAgIHNvcnRBdHRyaWJ1dGUsXG4gICAgc29ydE9yZGVyLFxuICAgIHVuaXQsXG4gICAgdW5pdFBvc2l0aW9uXG59KSB7XG4gICAgY29uc3QgW2NhblJlbmRlciwgc2V0Q2FuUmVuZGVyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWYoW10pO1xuICAgIGNvbnN0IHRvb2x0aXBSZWYgPSB1c2VSZWYoW10pO1xuICAgIGNvbnN0IGNvbG9yQXJyYXkgPSBbXCIjMDAzZjVjXCIsIFwiIzJmNGI3Y1wiLCBcIiM2NjUxOTFcIiwgXCIjYTA1MTk1XCIsIFwiI2Q0NTA4N1wiLCBcIiNmOTVkNmFcIiwgXCIjZmY3YzQzXCIsIFwiI2ZmYTYwMFwiXTtcbiAgICBjb25zdCBbdG90YWwsIHNldFRvdGFsXSA9IHVzZVN0YXRlKDApO1xuICAgIGNvbnN0IHN0cm9rZVdpZHRoID0gNDtcbiAgICBsZXQgY3VycmVudEluZGV4ID0gMDtcbiAgICBsZXQgcHJlU2VnbWVudHNUb3RhbExlbmd0aCA9IDA7XG4gICAgbGV0IHNvcnRJbnN0cnMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIHNldFRvb2x0aXBQb3NpdGlvbihldmVudCkge1xuICAgICAgICBjb25zdCBjdXJzb3JTaXplID0gMzIgLyAyO1xuICAgICAgICBjb25zdCB4ID0gZXZlbnQucGFnZVggKyBjdXJzb3JTaXplO1xuICAgICAgICBjb25zdCB5ID0gZXZlbnQucGFnZVkgLSBjdXJzb3JTaXplO1xuICAgICAgICB0b29sdGlwUmVmLmN1cnJlbnRbY3VycmVudEluZGV4XS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0teFwiLCBgJHt4fXB4YCk7XG4gICAgICAgIHRvb2x0aXBSZWYuY3VycmVudFtjdXJyZW50SW5kZXhdLnN0eWxlLnNldFByb3BlcnR5KFwiLS15XCIsIGAke3l9cHhgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93SGdobGlnaHRQYXJ0KGN1cnJlbnRDb250YWluZXIpIHtcbiAgICAgICAgY3VycmVudENvbnRhaW5lci5zdHlsZS5zdHJva2VXaWR0aCA9IHN0cm9rZVdpZHRoICsgMjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaWRlSGlnaGxpZ2h0UGFydChjdXJyZW50Q29udGFpbmVyKSB7XG4gICAgICAgIGN1cnJlbnRDb250YWluZXIuc3R5bGUuc3Ryb2tlV2lkdGggPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dUb29sdGlwKGluZGV4LCBjdXJyZW50Q29udGFpbmVyKSB7XG4gICAgICAgIHRvb2x0aXBSZWYuY3VycmVudFtpbmRleF0uY2xhc3NMaXN0LmFkZChcInNob3ctdG9vbHRpcFwiKTtcbiAgICAgICAgY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICAgIHNob3dIZ2hsaWdodFBhcnQoY3VycmVudENvbnRhaW5lcik7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgc2V0VG9vbHRpcFBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaWRlVG9vbHRpcChpbmRleCwgY3VycmVudENvbnRhaW5lcikge1xuICAgICAgICB0b29sdGlwUmVmLmN1cnJlbnRbaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LXRvb2x0aXBcIik7XG4gICAgICAgIGN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgIGhpZGVIaWdobGlnaHRQYXJ0KGN1cnJlbnRDb250YWluZXIpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHNldFRvb2x0aXBQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY1RvdGFsKCkge1xuICAgICAgICBjb25zdCB0b3RhbHMgPSBbXTtcbiAgICAgICAgY29udGV4dC5pdGVtcy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB0b3RhbHMucHVzaChOdW1iZXIoY2hhcnRWYWx1ZS5nZXQoY29udGV4dC5pdGVtc1tpbmRleF0pLmRpc3BsYXlWYWx1ZSkpKTtcbiAgICAgICAgc2V0VG90YWwodG90YWxzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRTb3J0T3JkZXIoKSB7XG4gICAgICAgIGlmICghY3VzdG9tU29ydE9yZGVyICYmIHNvcnRBdHRyaWJ1dGUgPT09IFwiY2hhcnROYW1lXCIgJiYgY2hhcnROYW1lLnNvcnRhYmxlKSB7XG4gICAgICAgICAgICBzb3J0SW5zdHJzID0gW1tjaGFydE5hbWUuaWQsIHNvcnRPcmRlcl1dO1xuICAgICAgICB9IGVsc2UgaWYgKCFjdXN0b21Tb3J0T3JkZXIgJiYgc29ydEF0dHJpYnV0ZSA9PT0gXCJjaGFydFZhbHVlXCIgJiYgY2hhcnRWYWx1ZS5zb3J0YWJsZSkge1xuICAgICAgICAgICAgc29ydEluc3RycyA9IFtbY2hhcnRWYWx1ZS5pZCwgc29ydE9yZGVyXV07XG4gICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tU29ydE9yZGVyICYmIGN1c3RvbVNvcnRPcmRlci5zb3J0YWJsZSkge1xuICAgICAgICAgICAgc29ydEluc3RycyA9IFtbY3VzdG9tU29ydE9yZGVyLmlkLCBzb3J0T3JkZXJdXTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LnNldFNvcnRPcmRlcihzb3J0SW5zdHJzKTtcbiAgICB9XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LnN0YXR1cyA9PT0gXCJhdmFpbGFibGVcIiAmJiBjb250ZXh0Lml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNldFNvcnRPcmRlcigpO1xuICAgICAgICAgICAgY2FsY1RvdGFsKCk7XG4gICAgICAgICAgICBzZXRDYW5SZW5kZXIodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9LCBbY29udGV4dCwgY29sb3JzXSk7XG5cbiAgICBpZiAoY2FuUmVuZGVyKSB7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IDE1LjkxNTQ5NDMwOTE4OTUyO1xuICAgICAgICBjb25zdCBjaXJjdW1mZXJlbmNlID0gMiAqIE1hdGguUEkgKiByYWRpdXM7XG4gICAgICAgIGNvbnN0IHN0YXJ0QW5nbGUgPSAtOTA7XG5cbiAgICAgICAgZnVuY3Rpb24gc2VnbWVudFRvdGFsTGVuZ3RoKGluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCB0aGlzVG90YWwgPSAocHJlU2VnbWVudHNUb3RhbExlbmd0aCAqIDM2MCkgLyB0b3RhbCArIHN0YXJ0QW5nbGU7XG4gICAgICAgICAgICBwcmVTZWdtZW50c1RvdGFsTGVuZ3RoICs9IE51bWJlcihNYXRoLnJvdW5kKGNoYXJ0VmFsdWUuZ2V0KGNvbnRleHQuaXRlbXNbaW5kZXhdKS5kaXNwbGF5VmFsdWUpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzVG90YWw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaW1wbGUtZG9udXQtY2hhcnQtd2lkZ2V0XCI+XG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZG9udXRcIlxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDQwIDQwXCJcbiAgICAgICAgICAgICAgICAgICAgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluIG1lZXRcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2NvbnRleHQuaXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aXRlbX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e2VsZW1lbnQgPT4gKGNvbnRhaW5lclJlZi5jdXJyZW50W2luZGV4XSA9IGVsZW1lbnQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2BzaW1wbGVkb251dGNoYXJ0LWluZGV4LSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHNob3dUb29sdGlwKGluZGV4LCBjb250YWluZXJSZWYuY3VycmVudFtpbmRleF0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4gaGlkZVRvb2x0aXAoaW5kZXgsIGNvbnRhaW5lclJlZi5jdXJyZW50W2luZGV4XSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3g9XCIyMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3k9XCIyMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkb251dC1zbGljZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcj17cmFkaXVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aD17c3Ryb2tlV2lkdGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPXtgdmFyKC0tbGluZWNoYXJ0LWNvbG9yLSR7W2luZGV4XX0sICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc1tpbmRleF0gPyBjb2xvcnNbaW5kZXhdLnZhbHVlIDogY29sb3JBcnJheVtpbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlRGFzaGFycmF5PXtNYXRoLnJvdW5kKGNpcmN1bWZlcmVuY2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZURhc2hvZmZzZXQ9e01hdGgucm91bmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpcmN1bWZlcmVuY2UgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNpcmN1bWZlcmVuY2UgKiBjaGFydFZhbHVlLmdldChjb250ZXh0Lml0ZW1zW2luZGV4XSkuZGlzcGxheVZhbHVlKSAvIHRvdGFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09e2Byb3RhdGUoJHtzZWdtZW50VG90YWxMZW5ndGgoaW5kZXgpfSAyMCAyMClgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaW1wbGUtZG9udXQtY2hhcnQtaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheVRvdGFsICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJsaW5lY2hhcnQtdG90YWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dW5pdFBvc2l0aW9uID09PSBcImJlZm9yZVwiICYmIHVuaXQgJiYgdW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG90YWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3VuaXRQb3NpdGlvbiA9PT0gXCJhZnRlclwiICYmIHVuaXQgJiYgdW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT17YGxpbmVjaGFydC1sZWdlbmRgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb250ZXh0Lml0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtgbGluZWNoYXJ0LWxlZ2VuZC1pbmRleC0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2hvd0hnaGxpZ2h0UGFydChjb250YWluZXJSZWYuY3VycmVudFtpbmRleF0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9eygpID0+IGhpZGVIaWdobGlnaHRQYXJ0KGNvbnRhaW5lclJlZi5jdXJyZW50W2luZGV4XSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGB2YXIoLS1saW5lY2hhcnQtY29sb3ItJHtbaW5kZXhdfSwgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzW2luZGV4XSA/IGNvbG9yc1tpbmRleF0udmFsdWUgOiBjb2xvckFycmF5W2luZGV4XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e2NoYXJ0TmFtZS5nZXQoY29udGV4dC5pdGVtc1tpbmRleF0pLmRpc3BsYXlWYWx1ZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3VuaXRQb3NpdGlvbiA9PT0gXCJiZWZvcmVcIiAmJiB1bml0ICYmIHVuaXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2hhcnRWYWx1ZS5nZXQoY29udGV4dC5pdGVtc1tpbmRleF0pLmRpc3BsYXlWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1bml0UG9zaXRpb24gPT09IFwiYWZ0ZXJcIiAmJiB1bml0ICYmIHVuaXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibGluZWNoYXJ0LXRvb2x0aXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtlbGVtZW50ID0+ICh0b29sdGlwUmVmLmN1cnJlbnRbaW5kZXhdID0gZWxlbWVudCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPntjaGFydE5hbWUuZ2V0KGNvbnRleHQuaXRlbXNbaW5kZXhdKS5kaXNwbGF5VmFsdWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3VuaXRQb3NpdGlvbiA9PT0gXCJiZWZvcmVcIiAmJiB1bml0ICYmIHVuaXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NoYXJ0VmFsdWUuZ2V0KGNvbnRleHQuaXRlbXNbaW5kZXhdKS5kaXNwbGF5VmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3VuaXRQb3NpdGlvbiA9PT0gXCJhZnRlclwiICYmIHVuaXQgJiYgdW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibGluZWNoYXJ0LXdpZGdldFwiPjwvZGl2PjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsic3R5bGVJbmplY3QiLCJjc3MiLCJyZWYiLCJpbnNlcnRBdCIsImRvY3VtZW50IiwiaGVhZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJTaW1wbGVEb251dENoYXJ0IiwiY29udGV4dCIsImNoYXJ0VmFsdWUiLCJjb2xvcnMiLCJjdXN0b21Tb3J0T3JkZXIiLCJjaGFydE5hbWUiLCJkaXNwbGF5VG90YWwiLCJzb3J0QXR0cmlidXRlIiwic29ydE9yZGVyIiwidW5pdCIsInVuaXRQb3NpdGlvbiIsImNhblJlbmRlciIsInNldENhblJlbmRlciIsInVzZVN0YXRlIiwiY29udGFpbmVyUmVmIiwidXNlUmVmIiwidG9vbHRpcFJlZiIsImNvbG9yQXJyYXkiLCJ0b3RhbCIsInNldFRvdGFsIiwic3Ryb2tlV2lkdGgiLCJjdXJyZW50SW5kZXgiLCJwcmVTZWdtZW50c1RvdGFsTGVuZ3RoIiwic29ydEluc3RycyIsInNldFRvb2x0aXBQb3NpdGlvbiIsImV2ZW50IiwiY3Vyc29yU2l6ZSIsIngiLCJwYWdlWCIsInkiLCJwYWdlWSIsImN1cnJlbnQiLCJzZXRQcm9wZXJ0eSIsInNob3dIZ2hsaWdodFBhcnQiLCJjdXJyZW50Q29udGFpbmVyIiwiaGlkZUhpZ2hsaWdodFBhcnQiLCJzaG93VG9vbHRpcCIsImluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGVUb29sdGlwIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhbGNUb3RhbCIsInRvdGFscyIsIml0ZW1zIiwibWFwIiwiaXRlbSIsInB1c2giLCJOdW1iZXIiLCJnZXQiLCJkaXNwbGF5VmFsdWUiLCJyZWR1Y2UiLCJhIiwiYiIsInNldFNvcnRPcmRlciIsInNvcnRhYmxlIiwiaWQiLCJ1c2VFZmZlY3QiLCJzdGF0dXMiLCJsZW5ndGgiLCJyYWRpdXMiLCJjaXJjdW1mZXJlbmNlIiwiTWF0aCIsIlBJIiwic3RhcnRBbmdsZSIsInNlZ21lbnRUb3RhbExlbmd0aCIsInRoaXNUb3RhbCIsInJvdW5kIiwiZWxlbWVudCIsInZhbHVlIiwiYmFja2dyb3VuZENvbG9yIl0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLFdBQVQsQ0FBcUJDLEdBQXJCLEVBQTBCQyxHQUExQixFQUErQjtBQUM3QixNQUFLQSxHQUFHLEtBQUssS0FBSyxDQUFsQixFQUFzQkEsR0FBRyxHQUFHLEVBQU47QUFDdEIsTUFBSUMsUUFBUSxHQUFHRCxHQUFHLENBQUNDLFFBQW5COztBQUVBLE1BQUksQ0FBQ0YsR0FBRCxJQUFRLE9BQU9HLFFBQVAsS0FB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
